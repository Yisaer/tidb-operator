apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  name: mutation-admission-contorller-cfg
  labels:
    app: admission-controller
webhooks:
  - name: create-pod-admission-controller.pingcap.net
    failurePolicy: Fail
    clientConfig:
      service:
        name: admission-controller-svc
        namespace: test
        path: "/pods"
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURqRENDQW5TZ0F3SUJBZ0lVWnV1cUw5WUNjdlhUcVBKckRjWEJYNjB1RURJd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0ZURVRNQkVHQTFVRUF4TUthM1ZpWlhKdVpYUmxjekFlRncweE9URXdNall4TURNMk1EQmFGdzB5TURFdwpNalV4TURNMk1EQmFNQ3d4S2pBb0JnTlZCQU1USVdGa2JXbHpjMmx2YmkxamIyNTBjbTlzYkdWeUxYTjJZeTUwClpYTjBMbk4yWXpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTjBRYW5qcE5tSEEKaTRTRjZWcjIzdHFZRnJaWFZaTlRjYVFkK28rUVVJbVYveXBFdURkdFkreTdvdXNrSG9kUWJ6ZlBxTnVwRVQ0eQpydjl0eDUzUGFxWk5tOGtCZlBzbFVsM2lINHVMWm9jbFRDK0Y0TUllMnR1RWdjM05kdklNMXlKUkNmaVZ6RjYrCkR1OFh3TXpLOHNBK2RpQVo2SWVRMkJROEVWSmNGR0ljUlROeldqTEE1MWVYQ3hKcS9ROWdSVVUwSDM4RGw1bXgKUUl0TzBvbDI5RlRmUEFBRzBmS2lrRys1YStLTTJ5RGs0MlFFUElSSElPSnh3Z1pZQzRTUlE0ZUU1YWJKb2tEawpSN3Y5RDNoVG81Q1ZqdUo4Y0tQZjJzdklZa3BXNFVlMGtsTDdIank4NElLU1lRenlXRHRKTTUyNVJnaTRBZldzClNwV3YrQ29kTEVVQ0F3RUFBYU9CdkRDQnVUQU9CZ05WSFE4QkFmOEVCQU1DQmFBd0V3WURWUjBsQkF3d0NnWUkKS3dZQkJRVUhBd0V3REFZRFZSMFRBUUgvQkFJd0FEQWRCZ05WSFE0RUZnUVU1ZGZ2R2VKZ0ZTZWtGUWRabURyVwo0WktsNDBJd1pRWURWUjBSQkY0d1hJSVlZV1J0YVhOemFXOXVMV052Ym5SeWIyeHNaWEl0YzNaamdoMWhaRzFwCmMzTnBiMjR0WTI5dWRISnZiR3hsY2kxemRtTXVkR1Z6ZElJaFlXUnRhWE56YVc5dUxXTnZiblJ5YjJ4c1pYSXQKYzNaakxuUmxjM1F1YzNaak1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQkZTbjNnWmxkYUQ4amhORDQxV2tPMgpLR1BJdE9iS0xyeENvWHhQVGNqRDlkQlkzdkRHOUJrUitmeTFxRE9DNEhBQkNlMzNyNjlNOEtmOHRubVQvTjBDCmhjVTFmaUYrbXFoYjNiVUJOVytUa3FrR0NQMUxKSzk3USt2aWNadHJXVEt6ajRMMVRQSjRyZTJUR2xCS1VEdDMKQjI5cWF0b25EODFPQ1VXRDVlc2JwZ0RGQzNmeTZHZkk0SldXR0FZRXNhSnEyclBZTVdJcEVidlJubDhTaTJVTQpCT3FlUXIwdUhJT0tEREM4TENGeEFJa1BIeTBxSjgxRTJNaTRCRk1HcjVsMks3TTVjTUdyWHBYMVN6ZXVtTDdkCnV6Z2swM2VuaDhJQU1WVXQraHk0NzJmaHh4Z21waGx1Sy96UGxSOUFUeEJMeHpjbllyV2Z6TnZYSm9ZT2FCZGIKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
    rules:
      - operations: [ "CREATE" ]
        apiGroups: [ "" ]
        apiVersions: ["v1"]
        resources: ["pods"]
---
apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: validation-admission-contorller-cfg
  labels:
    app: admission-controller
webhooks:
  - name: delete-pod-admission-controller.pingcap.net
    failurePolicy: Fail
    clientConfig:
      service:
        name: admission-controller-svc
        namespace: test
        path: "/pods"
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURqRENDQW5TZ0F3SUJBZ0lVWnV1cUw5WUNjdlhUcVBKckRjWEJYNjB1RURJd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0ZURVRNQkVHQTFVRUF4TUthM1ZpWlhKdVpYUmxjekFlRncweE9URXdNall4TURNMk1EQmFGdzB5TURFdwpNalV4TURNMk1EQmFNQ3d4S2pBb0JnTlZCQU1USVdGa2JXbHpjMmx2YmkxamIyNTBjbTlzYkdWeUxYTjJZeTUwClpYTjBMbk4yWXpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTjBRYW5qcE5tSEEKaTRTRjZWcjIzdHFZRnJaWFZaTlRjYVFkK28rUVVJbVYveXBFdURkdFkreTdvdXNrSG9kUWJ6ZlBxTnVwRVQ0eQpydjl0eDUzUGFxWk5tOGtCZlBzbFVsM2lINHVMWm9jbFRDK0Y0TUllMnR1RWdjM05kdklNMXlKUkNmaVZ6RjYrCkR1OFh3TXpLOHNBK2RpQVo2SWVRMkJROEVWSmNGR0ljUlROeldqTEE1MWVYQ3hKcS9ROWdSVVUwSDM4RGw1bXgKUUl0TzBvbDI5RlRmUEFBRzBmS2lrRys1YStLTTJ5RGs0MlFFUElSSElPSnh3Z1pZQzRTUlE0ZUU1YWJKb2tEawpSN3Y5RDNoVG81Q1ZqdUo4Y0tQZjJzdklZa3BXNFVlMGtsTDdIank4NElLU1lRenlXRHRKTTUyNVJnaTRBZldzClNwV3YrQ29kTEVVQ0F3RUFBYU9CdkRDQnVUQU9CZ05WSFE4QkFmOEVCQU1DQmFBd0V3WURWUjBsQkF3d0NnWUkKS3dZQkJRVUhBd0V3REFZRFZSMFRBUUgvQkFJd0FEQWRCZ05WSFE0RUZnUVU1ZGZ2R2VKZ0ZTZWtGUWRabURyVwo0WktsNDBJd1pRWURWUjBSQkY0d1hJSVlZV1J0YVhOemFXOXVMV052Ym5SeWIyeHNaWEl0YzNaamdoMWhaRzFwCmMzTnBiMjR0WTI5dWRISnZiR3hsY2kxemRtTXVkR1Z6ZElJaFlXUnRhWE56YVc5dUxXTnZiblJ5YjJ4c1pYSXQKYzNaakxuUmxjM1F1YzNaak1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQkZTbjNnWmxkYUQ4amhORDQxV2tPMgpLR1BJdE9iS0xyeENvWHhQVGNqRDlkQlkzdkRHOUJrUitmeTFxRE9DNEhBQkNlMzNyNjlNOEtmOHRubVQvTjBDCmhjVTFmaUYrbXFoYjNiVUJOVytUa3FrR0NQMUxKSzk3USt2aWNadHJXVEt6ajRMMVRQSjRyZTJUR2xCS1VEdDMKQjI5cWF0b25EODFPQ1VXRDVlc2JwZ0RGQzNmeTZHZkk0SldXR0FZRXNhSnEyclBZTVdJcEVidlJubDhTaTJVTQpCT3FlUXIwdUhJT0tEREM4TENGeEFJa1BIeTBxSjgxRTJNaTRCRk1HcjVsMks3TTVjTUdyWHBYMVN6ZXVtTDdkCnV6Z2swM2VuaDhJQU1WVXQraHk0NzJmaHh4Z21waGx1Sy96UGxSOUFUeEJMeHpjbllyV2Z6TnZYSm9ZT2FCZGIKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
    rules:
      - operations: [ "DELETE" ]
        apiGroups: [ "" ]
        apiVersions: ["v1"]
        resources: ["pods"]